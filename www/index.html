<!DOCTYPE>

<html>
<head>
<meta charset="UTF-8">
	 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
</head>

	<body onload="SomeFunction()">	
		<h2>Train Information from Indian Railways API</h2>
        <form>
        <div> 
            <input id="tags1">
        </div>
        <div class="ui-widget"> 
            <input id="tags2">
        </div>
            <button id="getTrains" >GO</button>
            </form>
 <script>
     var stationList = [];
     var stationCode = [];
     
   function SomeFunction(){
        
    
       $.ajax({            
				type: 'GET',
				url: 'http://api.erail.in/stations/?key=3d970b43-550b-4568-9227-492697f47093',	
				dataType: 'json',
					success: function(data){
                       
                        for(var i = 0; i<data.length;i++){
                        stationList[i] = data[i].name;
                            stationCode[i] = data[i].code;
                        }
                    },
					error: function(x, e){
						alert('ERROR');
						}
					});
    }
     
     $(function() {   
    $( "#tags1" ).autocomplete({
      source: stationList
    });
  });
     
     $(function() {   
    $( "#tags2" ).autocomplete({
      source: stationList
    });
  });
     
     
$(function () {
        $("#getTrains").bind("click", function () {
            var url = "http://10.133.70.195:3000/page2.html?name=" + encodeURIComponent($("#tags1").val()) + "&technology=" + encodeURIComponent($("#tags2").val());
            window.location.href = url;
        });
    });
     
  </script>
	</body>	
</html>